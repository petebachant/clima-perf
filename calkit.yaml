owner: petebachant
name: clima-perf
title: CliMA performance
description: Tracking CliMA performance over time.
git_repo_url: https://github.com/petebachant/clima-perf

environments:
  main:
    path: envs/main.txt
    kind: uv-venv
    prefix: .calkit/venvs/main/.venv
    python: "3.14"
  clima:
    kind: slurm
    host: clima.gps.caltech.edu

pipeline:
  stages:
    run-2026-01-01:
      kind: sbatch
      script_path: scripts/run.sh
      environment: clima
      sbatch_options:
        - --gpus=1
        - --time=120
      args:
        - --date
        - "2026-01-01"
      inputs:
        - scripts/run.py
      outputs:
        - path: envs/2026-01-01
          storage: git
    summarize:
      kind: python-script
      environment: main
      script_path: scripts/summarize.py
      inputs:
        - .calkit/slurm/logs
